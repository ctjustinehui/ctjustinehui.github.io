jsPsych.plugins["serial-reaction-time-mouse"]=function(){var e={};return e.info={name:"serial-reaction-time-mouse",description:"",parameters:{target:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Target",array:!0,"default":undefined,description:"The location of the target. The array should be the [row, column] of the target."},grid:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Grid",array:!0,"default":[[1,1,1,1]],description:"This array represents the grid of boxes shown on the screen."},grid_square_size:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Grid square size","default":100,description:"The width and height in pixels of each square in the grid."},target_color:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Target color","default":"#999",description:"The color of the target square."},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial","default":!0,description:"If true, the trial ends after a key press."},pre_target_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Pre-target duration","default":0,description:"The number of milliseconds to display the grid before the target changes color."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration","default":-1,description:"How long to show the trial"},fade_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Fade duration","default":-1,description:"If a positive number, the target will progressively change color at the start of the trial, with the transition lasting this many milliseconds."},allow_nontarget_responses:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Allow nontarget response","default":!1,description:"If true, then user can make nontarget response."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt","default":"",description:"Any content here will be displayed below the stimulus"}}},e.trial=function(e,t){function r(){var r;r=t.allow_nontarget_responses?e.querySelectorAll(".jspsych-serial-reaction-time-stimulus-cell"):[e.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+t.target[0]+"-"+t.target[1])];for(var n=0;n<r.length;n++)r[n].addEventListener("mousedown",function(e){if(-1!=s){var t={};t.row=e.currentTarget.getAttribute("data-row"),t.column=e.currentTarget.getAttribute("data-column"),t.rt=Date.now()-s,i(t)}});s=Date.now(),-1==t.fade_duration?e.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+t.target[0]+"-"+t.target[1]).style.backgroundColor=t.target_color:(e.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+t.target[0]+"-"+t.target[1]).style.transition="background-color "+t.fade_duration,e.querySelector("#jspsych-serial-reaction-time-stimulus-cell-"+t.target[0]+"-"+t.target[1]).style.backgroundColor=t.target_color),t.trial_duration>-1&&jsPsych.pluginAPI.setTimeout(a,t.trial_duration)}function a(){jsPsych.pluginAPI.clearAllTimeouts();var r={rt:n.rt,grid:JSON.stringify(t.grid),target:JSON.stringify(t.target),response_row:n.row,response_column:n.column,correct:n.row==t.target[0]&&n.column==t.target[1]};e.innerHTML="",jsPsych.finishTrial(r)}function i(e){n=-1==n.rt?e:n,t.response_ends_trial&&a()}var s=-1,n={rt:-1,row:-1,column:-1},o=this.stimulus(t.grid,t.grid_square_size);e.innerHTML=o,t.pre_target_duration<=0?r():jsPsych.pluginAPI.setTimeout(function(){r()},t.pre_target_duration),""!==t.prompt&&(e.innerHTML+=t.prompt)},e.stimulus=function(e,t,r,a,i){for(var s="<div id='jspsych-serial-reaction-time-stimulus' style='margin:auto; display: table; table-layout: fixed; border-spacing:"+t/4+"px'>",n=0;n<e.length;n++){s+="<div class='jspsych-serial-reaction-time-stimulus-row' style='display:table-row;'>";for(var o=0;o<e[n].length;o++){s+="<div class='"+"jspsych-serial-reaction-time-stimulus-cell"+"' id='jspsych-serial-reaction-time-stimulus-cell-"+n+"-"+o+"' data-row="+n+" data-column="+o+" style='width:"+t+"px; height:"+t+"px; display:table-cell; vertical-align:middle; text-align: center; cursor: pointer; font-size:"+t/2+"px;",1==e[n][o]&&(s+="border: 2px solid black;"),void 0!==r&&r[0]==n&&r[1]==o&&(s+="background-color: "+a+";"),s+="'>",void 0!==i&&!1!==i[n][o]&&(s+=i[n][o]),s+="</div>"}s+="</div>"}return s+="</div>"},e}();