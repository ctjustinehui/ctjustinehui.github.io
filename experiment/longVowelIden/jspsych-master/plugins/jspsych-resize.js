jsPsych.plugins.resize=function(){var e={};return e.info={name:"resize",description:"",parameters:{item_height:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Item height","default":1,description:"The height of the item to be measured."},item_width:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Item width","default":1,description:"The width of the item to be measured."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt","default":"",description:"The content displayed below the resizable box and above the button."},pixels_per_unit:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Pixels per unit","default":100,description:"After the scaling factor is applied, this many pixels will equal one unit of measurement."},starting_size:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Starting size","default":100,description:"The initial size of the box, in pixels, along the larget dimension."},button_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Button label","default":"Continue",description:"Label to display on the button to complete calibration."}}},e.trial=function(e,t){function i(){var e=(b=f.offsetWidth)/t.item_width;y=e/t.pixels_per_unit,document.getElementById("jspsych-content").style.transform="scale("+y+")"}function s(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",c),e.innerHTML="";var t={final_height_px:g,final_width_px:b,scale_factor:y};jsPsych.finishTrial(t)}var n=t.item_width/t.item_height;if(t.item_width>=t.item_height)var a=t.starting_size,r=Math.round(t.starting_size/n);else r=t.starting_size,a=Math.round(t.starting_size*n);var o='<div id="jspsych-resize-div" style="border: 2px solid steelblue; height: '+r+"px; width:"+a+'px; margin: 7px auto; background-color: lightsteelblue; position: relative;">';o+='<div id="jspsych-resize-handle" style="cursor: nwse-resize; background-color: steelblue; width: 10px; height: 10px; border: 2px solid lightsteelblue; position: absolute; bottom: 0; right: 0;"></div>',o+="</div>",o+=t.prompt,o+='<a class="jspsych-btn" id="jspsych-resize-btn">'+t.button_label+"</a>",e.innerHTML=o,document.getElementById("jspsych-resize-btn").addEventListener("click",function(){i(),s()});var p,h,l,d,u=!1,m=function(e){e.preventDefault(),u=!0,p=e.pageX,h=e.pageY,l=parseInt(f.style.width),d=parseInt(f.style.height)};e.querySelector("#jspsych-resize-handle").addEventListener("mousedown",m);var c=function(){u=!1};document.addEventListener("mouseup",c);var y,g,b,f=e.querySelector("#jspsych-resize-div"),v=function(e){if(u){var t=e.pageX-p,i=e.pageY-h;Math.abs(t)>=Math.abs(i)?(f.style.width=Math.round(Math.max(20,l+2*t))+"px",f.style.height=Math.round(Math.max(20,l+2*t)/n)+"px"):(f.style.height=Math.round(Math.max(20,d+2*i))+"px",f.style.width=Math.round(n*Math.max(20,d+2*i))+"px")}};document.addEventListener("mousemove",v)},e}();