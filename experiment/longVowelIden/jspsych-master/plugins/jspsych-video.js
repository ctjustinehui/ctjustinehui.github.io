jsPsych.plugins.video=function(){var e={};return e.info={name:"video",description:"",parameters:{sources:{type:jsPsych.plugins.parameterType.VIDEO,pretty_name:"Sources",array:!0,"default":undefined,description:"The video file to play."},width:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Width","default":undefined,description:"The width of the video in pixels."},height:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Height","default":undefined,description:"The height of the video display in pixels."},autoplay:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Autoplay","default":!0,description:"If true, the video will begin playing as soon as it has loaded."},controls:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Controls","default":!1,description:"If true, the subject will be able to pause the video or move the playback to any point in the video."},prompt:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Prompt","default":"",description:"Any content here will be displayed below the video content."},start:{type:jsPsych.plugins.parameterType.FLOAT,pretty_name:"Start","default":!1,description:"Time to start the clip."},stop:{type:jsPsych.plugins.parameterType.FLOAT,pretty_name:"Stop","default":!1,description:"Time to stop the clip."}}},e.trial=function(e,t){var s='<video id="jspsych-video-player" width="'+t.width+'" height="'+t.height+'" ';t.autoplay&&(s+="autoplay "),t.controls&&(s+="controls "),s+=">";for(var i=0;i<t.sources.length;i++){var r=t.sources[i];r.indexOf("?")>-1&&(r=r.substring(0,r.indexOf("?")));var p=r.substr(r.lastIndexOf(".")+1);p=p.toLowerCase(),s+='<source src="'+t.sources[i],t.start?s+="#t="+t.start:s+="#t=0",t.stop&&(s+=","+t.stop),s+='" type="video/'+p+'">'}s+="</video>",""!==t.prompt&&(s+=t.prompt),e.innerHTML=s,e.querySelector("#jspsych-video-player").onended=function(){o()},e.querySelector("#jspsych-video-player").onplay=function(){0!=t.stop&&(0==t.start&&(t.start=0),jsPsych.pluginAPI.setTimeout(o,1e3*(t.stop-t.start)))};var o=function(){var s={stimulus:JSON.stringify(t.sources)};e.innerHTML="",jsPsych.finishTrial(s)}},e}();