jsPsych.plugins["iat-html"]=function(){var e={};return e.info={name:"iat-html",description:"",parameters:{stimulus:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Stimulus","default":undefined,description:"The HTML string to be displayed."},left_category_key:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Left category key","default":"E",description:"Key press that is associated with the left category label."},right_category_key:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Right category key","default":"I",description:"Key press that is associated with the right category label."},left_category_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Left category label",array:!0,"default":["left"],description:"The label that is associated with the stimulus. Aligned to the left side of page."},right_category_label:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Right category label",array:!0,"default":["right"],description:"The label that is associated with the stimulus. Aligned to the right side of the page."},key_to_move_forward:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Key to move forward",array:!0,"default":jsPsych.ALL_KEYS,description:"The keys that allow the user to advance to the next trial if their key press was incorrect."},display_feedback:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Display feedback","default":!1,description:"If true, then html when wrong will be displayed when user makes an incorrect key press."},html_when_wrong:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"HTML when wrong","default":'<span style="color: red; font-size: 80px">X</span>',description:"The image to display when a user presses the wrong key."},bottom_instructions:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Bottom instructions","default":"<p>If you press the wrong key, a red X will appear. Press any key to continue.</p>",description:"Instructions shown at the bottom of the page."},force_correct_key_press:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Force correct key press","default":!1,description:"If true, in order to advance to the next trial after a wrong key press the user will be forced to press the correct key."},stim_key_association:{type:jsPsych.plugins.parameterType.HTML_STRING,pretty_name:"Stimulus key association",options:["left","right"],"default":"undefined",description:'Stimulus will be associated with eight "left" or "right".'},response_ends_trial:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Response ends trial","default":!0,description:"If true, trial will end when user makes a response."},trial_duration:{type:jsPsych.plugins.parameterType.INT,pretty_name:"Trial duration","default":-1,description:"How long to show the trial."}}},e.trial=function(e,t){var s="";s+="<div style='position: absolute; height: 20%; width: 100%; margin-left: auto; margin-right: auto; top: 42%; left: 0; right: 0'><p id='jspsych-iat-stim'>"+t.stimulus+"</p></div>",s+="<div id='trial_left_align' style='position: absolute; top: 18%; left: 20%'>",1==t.left_category_label.length?s+="<p>Press "+t.left_category_key+" for:<br> "+t.left_category_label[0].bold()+"</p></div>":s+="<p>Press "+t.left_category_key+" for:<br> "+t.left_category_label[0].bold()+"<br>or<br>"+t.left_category_label[1].bold()+"</p></div>",s+="<div id='trial_right_align' style='position: absolute; top: 18%; right: 20%'>",1==t.right_category_label.length?s+="<p>Press "+t.right_category_key+" for:<br> "+t.right_category_label[0].bold()+"</p></div>":s+="<p>Press "+t.right_category_key+" for:<br> "+t.right_category_label[0].bold()+"<br>or<br>"+t.right_category_label[1].bold()+"</p></div>",s+="<div id='wrongImgID' style='position:relative; top: 300px; margin-left: auto; margin-right: auto; left: 0; right: 0'>",!0===t.display_feedback?(s+="<div id='wrongImgContainer' style='visibility: hidden; position: absolute; top: -75px; margin-left: auto; margin-right: auto; left: 0; right: 0'><p>"+t.html_when_wrong+"</p></div>",s+="<div>"+t.bottom_instructions+"</div>"):s+="<div>"+t.bottom_instructions+"</div>",s+="</div>",e.innerHTML=s;var r={rt:-1,key:-1,correct:!1},i=function(){jsPsych.pluginAPI.clearAllTimeouts(),void 0!==n&&jsPsych.pluginAPI.cancelKeyboardResponse(n);var s={rt:r.rt,stimulus:t.stimulus,key_press:r.key,correct:r.correct};e.innerHTML="",jsPsych.finishTrial(s)},a=jsPsych.pluginAPI.convertKeyCharacterToKeyCode(t.left_category_key),o=jsPsych.pluginAPI.convertKeyCharacterToKeyCode(t.right_category_key),l=function(s){var l=document.getElementById("wrongImgContainer");if(e.querySelector("#jspsych-iat-stim").className+=" responded",-1==r.key&&(r=s),"right"==t.stim_key_association)if(r.rt>-1&&r.key==o)r.correct=!0,t.response_ends_trial&&i();else if(r.correct=!1,t.response_ends_trial||1!=t.display_feedback||(l.style.visibility="visible"),t.response_ends_trial&&1==t.display_feedback)if(l.style.visibility="visible",t.force_correct_key_press)jsPsych.pluginAPI.getKeyboardResponse({callback_function:i,valid_responses:[t.right_category_key]});else jsPsych.pluginAPI.getKeyboardResponse({callback_function:i,valid_responses:t.key_to_move_forward});else if(t.response_ends_trial&&1!=t.display_feedback)jsPsych.pluginAPI.getKeyboardResponse({callback_function:i,valid_responses:[jsPsych.ALL_KEYS]});else!t.response_ends_trial&&t.display_feedback;else if("left"==t.stim_key_association)if(r.rt>-1&&r.key==a)r.correct=!0,t.response_ends_trial&&i();else if(r.correct=!1,t.response_ends_trial||1!=t.display_feedback||(l.style.visibility="visible"),t.response_ends_trial&&1==t.display_feedback)if(l.style.visibility="visible",t.force_correct_key_press)jsPsych.pluginAPI.getKeyboardResponse({callback_function:i,valid_responses:[t.left_category_key]});else jsPsych.pluginAPI.getKeyboardResponse({callback_function:i,valid_responses:t.key_to_move_forward});else if(t.response_ends_trial&&1!=t.display_feedback)jsPsych.pluginAPI.getKeyboardResponse({callback_function:i,valid_responses:[jsPsych.ALL_KEYS]});else!t.response_ends_trial&&t.display_feedback};if(t.left_category_key!=jsPsych.NO_KEYS&&t.right_category_key!=jsPsych.NO_KEYS)var n=jsPsych.pluginAPI.getKeyboardResponse({callback_function:l,valid_responses:[t.left_category_key,t.right_category_key],rt_method:"date",persist:!1,allow_held_key:!1});t.trial_duration>0&&1!=t.response_ends_trial&&jsPsych.pluginAPI.setTimeout(function(){i()},t.trial_duration)},e}();