jsPsych.plugins["external-html"]=function(){function e(e,t,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.onload=function(){200!=r.status&&0!=r.status||(e.innerHTML=r.responseText,n())},r.send()}var t={};return t.info={name:"external-html",description:"",parameters:{url:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"URL","default":undefined,description:"The url of the external html page"},cont_key:{type:jsPsych.plugins.parameterType.KEYCODE,pretty_name:"Continue key","default":null,description:"The key to continue to the next page."},cont_btn:{type:jsPsych.plugins.parameterType.STRING,pretty_name:"Continue button","default":null,description:"The button to continue to the next page."},check_fn:{type:jsPsych.plugins.parameterType.FUNCTION,pretty_name:"Check function","default":function(){return!0},description:""},force_refresh:{type:jsPsych.plugins.parameterType.BOOL,pretty_name:"Force refresh","default":!1,description:"Refresh page."}}},t.trial=function(t,n){var r=n.url;n.force_refresh&&(r=n.url+"?time="+(new Date).getTime()),e(t,r,function(){var e=(new Date).getTime(),r=function(){if(!n.check_fn||n.check_fn(t)){n.cont_key&&document.removeEventListener("keydown",i);var r={rt:(new Date).getTime()-e,url:n.url};t.innerHTML="",jsPsych.finishTrial(r)}};if(n.cont_btn&&t.querySelector("#"+n.cont_btn).addEventListener("click",r),n.cont_key){var i=function(e){e.which==n.cont_key&&r()};t.addEventListener("keydown",i)}})},t}();