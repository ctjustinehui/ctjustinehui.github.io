const root="../",utils=require("./testing-utils.js");beforeEach(function(){require(root+"jspsych.js"),require(root+"plugins/jspsych-html-keyboard-response.js")}),describe("randomize order",function(){test("holder",function(){expect(!0).toBe(!0)})}),describe("repetitons",function(){test("holder",function(){expect(!0).toBe(!0)})}),describe("sampling",function(){test("holder",function(){expect(!0).toBe(!0)}),test("sampling functions run when timeline loops",function(){var e=0;const t=100;var s={timeline:[{type:"html-keyboard-response",stimulus:jsPsych.timelineVariable("stimulus")}],timeline_variables:[{stimulus:"1"},{stimulus:"2"},{stimulus:"3"}],sample:{type:"without-replacement",size:1},loop_function:function(){return++e<t}};jsPsych.init({timeline:[s]});for(var i=[],n=[],l=0;l<t/2;l++){var o=jsPsych.getDisplayElement().innerHTML;i.push(o),utils.pressKey(32);o=jsPsych.getDisplayElement().innerHTML;n.push(o),utils.pressKey(32)}expect(i).not.toEqual(n)})}),describe("timeline variables are correctly evaluated",function(){test("when used as trial type parameter",function(){require(root+"plugins/jspsych-html-button-response.js");var e=[{type:"html-keyboard-response"},{type:"html-button-response"}],t=[];t.push({timeline:[{type:jsPsych.timelineVariable("type"),stimulus:"hello",choices:["a","b"]}],timeline_variables:e}),jsPsych.init({timeline:t}),expect(jsPsych.getDisplayElement().innerHTML).not.toMatch("button"),utils.pressKey(65),expect(jsPsych.getDisplayElement().innerHTML).toMatch("button")}),test("when used with a plugin that has a FUNCTION parameter type",function(e){require(root+"plugins/jspsych-call-function.js");const t=jest.fn();var s=[{fn:function(){t("1")}},{fn:function(){t("2")}}],i=[];i.push({timeline:[{type:"call-function",func:jsPsych.timelineVariable("fn")}],timeline_variables:s}),jsPsych.init({timeline:i,on_finish:function(){expect(t.mock.calls.length).toBe(2),e()}})})});