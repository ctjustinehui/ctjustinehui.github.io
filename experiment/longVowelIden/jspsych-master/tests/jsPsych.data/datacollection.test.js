const root="../../";require(root+"jspsych.js");var data=[{rt:100,filter:!0},{rt:200,filter:!1},{rt:300,filter:!0},{rt:400,filter:!1},{rt:500,filter:!1}];jsPsych.data._customInsert(data),describe("DataCollection",function(){test("#filter",function(){expect(jsPsych.data.get().filter({filter:!0}).count()).toBe(2)}),test("#filter OR",function(){expect(jsPsych.data.get().filter([{filter:!0},{rt:300}]).count()).toBe(2),expect(jsPsych.data.get().filter([{filter:!0},{rt:200}]).count()).toBe(3)}),test("#filterCustom",function(){expect(jsPsych.data.get().filterCustom(function(t){return t.rt>200&&0==t.filter}).count()).toBe(2)}),test("#ignore",function(){expect(jsPsych.data.get().ignore("rt").select("rt").count()).toBe(0)}),test("#select",function(){expect(JSON.stringify(jsPsych.data.get().select("rt").values)).toBe(JSON.stringify([100,200,300,400,500]))}),test("#addToAll",function(){expect(jsPsych.data.get().readOnly().addToAll({added:5}).select("added").count()).toBe(5)}),test("#addToLast",function(){jsPsych.data.get().addToLast({lastonly:!0}),expect(jsPsych.data.get().values()[4].lastonly).toBe(!0)}),test("#readOnly",function(){jsPsych.data.get().readOnly().values()[0].rt=0,expect(jsPsych.data.get().values()[0].rt).toBe(100)}),test("not #readOnly",function(){jsPsych.data.get().values()[0].rt=0,expect(jsPsych.data.get().values()[0].rt).toBe(0)}),test("#count",function(){expect(jsPsych.data.get().count()).toBe(5)}),test("#push",function(){jsPsych.data.get().push({rt:600,filter:!0}),expect(jsPsych.data.get().count()).toBe(6),data=[{rt:100,filter:!0},{rt:200,filter:!1},{rt:300,filter:!0},{rt:400,filter:!1},{rt:500,filter:!1}],jsPsych.data._customInsert(data)}),test("#values",function(){expect(JSON.stringify(jsPsych.data.get().values())).toBe(JSON.stringify(data))}),test("#first",function(){expect(jsPsych.data.get().first(3).count()).toBe(3),expect(jsPsych.data.get().first(2).values()[1].rt).toBe(200)}),test("#last",function(){expect(jsPsych.data.get().last(2).count(2)).toBe(2),expect(jsPsych.data.get().last(2).values()[0].rt).toBe(400)}),test("#join",function(){var t=jsPsych.data.get().filter({filter:!0}),e=jsPsych.data.get().filter({rt:500}),s=t.join(e);expect(s.count()).toBe(3),expect(s.values()[2].rt).toBe(500)}),test("#unqiueNames",function(){var t=[{rt:100,filter:!0},{rt:200,filter:!1},{rt:300,filter:!0,v1:!1},{rt:400,filter:!1,v2:!0},{rt:500,filter:!1,v1:!1}];jsPsych.data._customInsert(t),expect(jsPsych.data.get().uniqueNames().length).toBe(4)})});